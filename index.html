<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <title>Fetch JSON Data with jQuery</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <body>
    <h2>Fetch JSON Data and Display in Table using jQuery</h2>
    <form id="form-container">
      <div class="row form-input">
        <input id="orcid_url" type="url" required placeholder="ORCID URL" />
      </div>
      <button id="fetchData">Fetch Data</button>
    </form>
    <div id="dataContainer" class="container"></div>
    <textarea id="json" name="summary" rows="5" readonly></textarea>

    <script>
      $(document).ready(function() {
        $("#fetchData").click(function() {
          $.getJSON($("#orcid_url").val(), function(data) {
            // Create the table element
            let table = $("<table>");

            // Create the table header
            let thead = $("<thead>");
            let headerRow = $("<tr>");
            headerRow.append("<th>ID</th>");
            headerRow.append("<th>Title</th>");
            headerRow.append("<th>Body</th>");
            thead.append(headerRow);
            table.append(thead);
            $("#json").val(data);

            // Create the table body
            let tbody = $("<tbody>");
            $.each(data, function(index, item) {
              let row = $("<tr>");
              row.append("<td>" + item.id + "</td>");
              row.append("<td>" + item.title + "</td>");
              row.append("<td>" + item.body + "</td>");
              tbody.append(row);
            });
            table.append(tbody);

            // Append the table to the container
            $("#dataContainer").html(table);
          }).fail(function(jqXHR, textStatus, errorThrown) {
            console.error("Error fetching data: ", textStatus, errorThrown);
          });
        });
      });
    </script>
  </body>
</html>
